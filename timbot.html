<!DOCTYPE html>
<html>

<head>
    <title>123autobot</title>
    <script src="https://unpkg.com/botui/build/botui.min.css"></script>
    <script src="https://unpkg.com/botui/build/botui-theme-default.css"></script>
    <script src="https://cdn.jsdelivr.net/vue/latest/vue.min.js"></script>
    <script src="https://unpkg.com/botui/build/botui.min.js"></script>
    <script src="assets/js/autopartsmart.js"></script>
    <script src="assets/js/autobot.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/botui/build/botui.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/botui/build/botui-theme-default.css" />
    <link rel="stylesheet" href="assets/css/styles.css" />

<body>
    <div class="autopart-bot-contain">
        <div id="my-botui-app">
            <bot-ui>
                <script>
                    var botui = new BotUI('my-botui-app');

                    botui.message.add({
                        content: 'Hoi, wat wil je doen?'
                    });

                    botui.action.button({
                        action: [
                            {
                                text: 'Iemand spreken',
                                value: 'is'
                            },
                            {
                                text: 'Probleem vaststellen',
                                value: 'pv'
                            },
                            {
                                text: 'Bestel status bekijken',
                                value: 'bsb'
                            }
                        ]
                    }).then(function (res) {
                        if (res.value == 'pv') {
                            autoBot.askForCar();
                        }
                    });

                    var autoBot = {
                        askForCar: function (res) {
                            botui.action.text({
                                action: {
                                    placeholder: 'Wat is het kenteken van je auto?'
                                },
                                delay: 500
                            })

                                .then(function (res) {
                                    let finalKenteken = res.value.toUpperCase().replace(/-/g, '');
                                    var currentAuto = new auto(finalKenteken);
                                })

                                .then(function () {
                                    botui.message.add({
                                        content: 'Klopt het dat dit jouw auto is?',
                                        delay: 1000
                                    })
                                        .then(function () {
                                            console.log(carObj);
                                            botui.message.add({
                                                content: carObj.handelsbenaming,
                                                delay: 500
                                            })
                                        });
                                })
                        }
                    }



                    /*var kenteken = function () {
                        botui.message.add({
                            content: 'Om te beginnen',
                            delay: 500
                        })
                        botui.message.add({
                            content: 'Wat is het kenteken van je auto?',
                            delay: 1000
                        })
                        botui.action.text({
                            action: {
                                placeholder: 'QQ-RT-21',
                            },
                            delay: 1000
                        })
                
                        


                            .then(function (res) {
                                return botui.message.bot({
                                    delay: 500,
                                    content: res.value + ', even zoeken...'
                                });
                            }).then(function () {
                                botui.message.add({
                                    content: 'Klopt het dat dit jouw auto is?',
                                    delay: 1000
                                })
                                botui.message.add({
                                    content: 'Mazda demio, moter y',
                                    delay: 1000
                                })
                                botui.action.button({
                                    action: [
                                        {
                                            text: 'Ja',
                                            value: 'ja'
                                        },
                                        {
                                            text: 'Nee',
                                            value: 'nee'
                                        }
                                    ],
                                    delay: 1500
                                }).then(function (res) {
                                    if (res.value == 'ja') {
                                        menu();
                                    }
                                    if (res.value == 'nee') {
                                        kenteken();
                                    }
                                })
                            });
                    }
                    */

                    var menu = function () {
                        botui.message.add({
                            content: 'Nu we weten welke auto je hebt',
                            delay: 500
                        })
                        botui.message.add({
                            content: 'Met welk onderwerp denk je dat er iets mis mee is?',
                            delay: 500
                        })
                        botui.action.select({
                            action: {
                                placeholder: "Onderwerpen",
                                multipleselect: false,
                                options: [
                                    { value: "ac", text: "Airco/koeling" },
                                    { value: "rs", text: "Remsysteem" },
                                    { value: "mv", text: "Motor/versnellingsbak" },
                                    { value: "cs", text: "Carroserie" },
                                    { value: "os", text: "Onderstel" },
                                    { value: "el", text: "Elektronica" },
                                    { value: "iw", text: "Ik weet het niet" },
                                ],
                                button: {
                                    icon: 'check',
                                    label: 'Ok'
                                }
                            },
                            delay: 1000
                        }).then(function (res) {
                            console.log(res.value);
                            followup(res.text);
                        });
                    }



                </script>
            </bot-ui>
        </div>
    </div>


</body>

</html>